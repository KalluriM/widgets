name: queue-monitor-panel
on: 
    push:
        branches: main
    workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
        
      - uses: actions/setup-node@v1
        with:
          node-version: 12
      - run: npm ci

      - run: npm run build -- $GITHUB_WORKFLOW

      - run: find ./dist
      - run: npm publish --access public --dry-run
        working-directory: ./dist/queue-monitor-panel

  publish:
      runs-on: ubuntu-latest
      needs: build
      env:
          COMPONENT_PATH: "./dist/$GITHUB_WORKFLOW"
      steps:
          - run: echo ${{env.COMPONENT_PATH}}
            
